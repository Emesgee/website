<!DOCTYPE html>
<html>
<head>
  <title>Protected Page</title>
  <style>
    body { font-family: Arial; }
    #content { display: none; }
  </style>
</head>
<body>

<div id="login">
  <h2>Enter Password</h2>
  <input type="password" id="passwordInput" placeholder="Password" />
  <button onclick="checkPassword()">Enter</button>
  <p id="error" style="color:red;"></p>
</div>

<div id="content">
  <h1>Welcome to the Protected Page</h1>
  <p>This is the secret content!</p>
</div>

<script>
  const correctHash = "{{PASSWORD_HASH}}";

  async function checkPassword() {
    const input = document.getElementById("passwordInput").value;
    const hashBuffer = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(input));
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');

    if (hashHex === correctHash) {
      document.getElementById("login").style.display = "none";
      document.getElementById("content").style.display = "block";
    } else {
      document.getElementById("error").innerText = "Incorrect password.";
    }
  }
</script>

</body>
</html>
